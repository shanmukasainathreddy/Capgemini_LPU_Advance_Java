package com.product;

import javax.persistence.*;

public class productDao {

    private static EntityManagerFactory emf =
            Persistence.createEntityManagerFactory("postgres");

    private static EntityManager em =
            emf.createEntityManager();

    public void insertProduct(product p) {

        EntityTransaction et = em.getTransaction();

        et.begin();
        em.persist(p);
        et.commit();
    }

    public product findById(int id) {

        return em.find(product.class, id);
    }

    public void deleteProduct(int id) {

        EntityTransaction et = em.getTransaction();

        product p = em.find(product.class, id);

        if (p != null) {
            et.begin();
            em.remove(p);
            et.commit();
        }
    } 
    
    public void close() {
        if (em != null) em.close();
        if (emf != null) emf.close();
    }
}